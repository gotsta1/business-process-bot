## Business process Telegram bot

Стек: Python 3.11+, sqlite, httpx, asyncio long polling (без вебхука), gspread (экспорт в Google Sheets).

### Setup
1) Установить зависимости:
```
pip install -r requirements.txt
```
2) Переменные окружения:
```
export TELEGRAM_BOT_TOKEN=...              # токен бота от BotFather
export GOOGLE_SERVICE_ACCOUNT_JSON=/path/to/service-account.json
export GOOGLE_SHEET_ID=<spreadsheet_id>    # для выгрузки
```
Можно положить эти переменные в `.env`.

### Запуск бота (long polling)
```
python main.py
```
База `bot.db` создается автоматически, базовые процессы забиваются при первом старте.

### Поведение бота
- `/start` — бот попросит имя (как в бизнес-процессах) и сохранит связь Telegram → имя.
- `/my` — список процессов, за которые отвечает пользователь.
- `/check DD-MM-YYYY HH:MM` — проверка, сколько осталось до дедлайна каждого процесса пользователя (без статусов напоминаний).
- Любой текст после /start до регистрации трактуется как имя.

### Автоматические напоминания
- Бот раз в ~60 секунд проверяет все процессы зарегистрированных пользователей и отправляет напоминания в Telegram за 120 и 60 минут до дедлайна (локальное время сервера).

### Google Sheets экспорт
```
python export_to_sheets.py
```
Выгружает таблицу `Processes` со столбцами: название, ответственный, периодичность, дедлайн, два напоминания (в минутах).
